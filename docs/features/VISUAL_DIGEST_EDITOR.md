# 可视化快报编辑器功能说明

## 概述

为了让不熟悉Markdown语法的用户也能方便地编辑快报内容，我们新增了可视化编辑器功能。用户可以在传统的Markdown编辑器和新的可视化编辑器之间无缝切换。

## 功能特性

### 1. 编辑模式切换
- **Markdown编辑**：保留原有的SimpleMDE编辑器，支持Markdown语法和实时预览
- **可视化编辑**：新增的所见即所得编辑器，无需了解Markdown语法

### 2. 可视化编辑器核心功能

#### 2.1 快报标题编辑
- 可直接点击编辑快报标题
- 支持中文字体（思源黑体）显示

#### 2.2 分类管理
- 预设五个标准新闻分类：
  - 一、金融业网络安全事件
  - 二、重大网络安全事件  
  - 三、重大数据泄露事件
  - 四、重大漏洞风险提示
  - 五、其他
- 支持添加自定义分类

#### 2.3 新闻条目编辑
每条新闻支持以下操作：
- **编辑标题**：直接在输入框中修改新闻标题
- **编辑摘要**：在文本区域中编辑新闻摘要
- **上移/下移**：调整新闻在分类中的顺序
- **删除**：移除不需要的新闻条目

#### 2.4 新增新闻功能
- **分类内添加**：在每个分类右侧点击"添加新闻"按钮
- **全局添加**：在编辑器底部点击"添加新闻"按钮，可选择任意分类
- **模态框填写**：通过弹窗表单填写新闻标题、摘要并选择分类

### 3. 智能转换功能

#### 3.1 Markdown转可视化
- 自动解析现有的Markdown快报内容
- 识别标题、分类、新闻条目结构
- 转换为可视化编辑界面

#### 3.2 可视化转Markdown  
- 实时将可视化编辑的内容转换为标准Markdown格式
- 保持快报的标准格式和样式
- 自动更新日期为当前日期
- 智能处理空分类：如果"其他"分类没有新闻条目，将自动从最终快报中省略

### 4. 响应式设计

#### 4.1 桌面端
- 双栏布局（编辑区 + 预览区）
- 悬停显示操作按钮
- 流畅的交互动画

#### 4.2 移动端
- 单栏布局适配小屏幕
- 始终显示操作按钮
- 触摸友好的界面设计

## 使用流程

### 1. 编辑现有快报
1. 在快报列表中点击"编辑"按钮
2. 在编辑模态框中选择"可视化编辑"模式
3. 直接点击修改标题和新闻内容
4. 点击"保存"完成编辑

### 2. 添加新闻
1. 切换到可视化编辑模式
2. 点击分类右侧的"添加新闻"按钮，或底部的"添加新闻"按钮
3. 在弹窗中填写新闻标题、摘要并选择分类
4. 点击"添加"确认

### 3. 管理新闻顺序
1. 鼠标悬停在新闻条目上显示操作按钮
2. 使用上移/下移按钮调整新闻顺序
3. 使用删除按钮移除不需要的新闻

## 技术实现

### 1. 前端架构
- 使用原生JavaScript实现，无额外依赖
- 模块化函数设计，便于维护
- 事件委托机制，提高性能

### 2. 数据处理
- Markdown解析：正则表达式匹配标题和内容
- 数据转换：双向转换确保数据一致性
- 实时同步：编辑器内容实时更新

### 3. 样式设计
- 使用CSS Grid和Flexbox布局
- 思源黑体字体支持中文显示
- 响应式设计适配多种设备

## 注意事项

1. **数据同步**：在两种编辑模式间切换时，内容会自动同步
2. **格式保持**：可视化编辑器会保持标准的快报Markdown格式
3. **字体支持**：确保使用思源黑体以获得最佳中文显示效果
4. **浏览器兼容**：支持现代浏览器，建议使用Chrome或Firefox

## 未来扩展

1. **富文本编辑**：支持更多文本格式（加粗、斜体、链接等）
2. **拖拽排序**：支持拖拽方式调整新闻顺序
3. **批量操作**：支持批量选择和操作新闻条目
4. **模板功能**：预设快报模板快速生成内容 