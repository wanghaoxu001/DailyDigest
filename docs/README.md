# 每日安全快报系统 (Daily Digest)

一个自动化网络安全新闻聚合与快报生成系统。

## 功能特点

- 自动从多种来源获取网络安全新闻（网页抓取和RSS）
- 使用AI自动生成新闻摘要和标题
- 自动翻译外语新闻
- 基于实体信息和文本相似度的智能去重功能
- 后台管理界面，用于配置新闻源和监控系统
- 前台用户界面，用于查看新闻和生成快报
- 支持MD和PDF格式导出
- 支持为翻译和总结任务配置不同的AI模型
- 智能翻译流程优化，根据内容特点决定翻译策略

## 新功能：智能翻译流程优化

系统现已实现更加高效的内容翻译和总结策略：

1. **智能翻译决策**：
   - 如果文章已有高质量摘要（长度>50字符），则只翻译摘要不翻译全文
   - 如果没有高质量摘要，则翻译全文进行处理
   - 对于中文内容，直接使用现有摘要或生成摘要

2. **标题直译优化**：
   - 直接翻译原标题，不再通过LLM重新生成标题
   - 保留原标题的语义和表达方式

3. **高效处理**：
   - 节省API调用成本和处理时间
   - 保留重要信息的同时减少冗余处理

## 新功能：为翻译和总结任务配置不同模型

系统现已支持为不同任务类型配置专用的LLM模型，可以根据需要调整以获得最佳效果：

### 可配置模型

- **通用模型** - 用于基本任务（OPENAI_MODEL）
- **翻译模型** - 专用于内容翻译任务（OPENAI_TRANSLATION_MODEL）
- **总结模型** - 专用于内容摘要生成（OPENAI_SUMMARIZATION_MODEL）

### 配置方法

在`.env`文件中添加以下配置：

```
# 通用模型配置
OPENAI_MODEL=gpt-3.5-turbo
# 翻译专用模型（如需更高质量翻译）
OPENAI_TRANSLATION_MODEL=gpt-4-turbo
# 总结专用模型（如需更精确总结）
OPENAI_SUMMARIZATION_MODEL=gpt-4-turbo
```

如果未指定专用模型，系统将默认使用通用模型（OPENAI_MODEL）。

## 新功能：增强的新闻抓取

本系统现已集成 Newspaper4k 库，提供更强大的新闻文章抓取和解析能力。

### 主要优势

1. **智能内容提取** - 自动识别并提取文章的主体内容，过滤广告和无关元素
2. **元数据解析** - 自动提取发布日期、作者、标题等元数据
3. **自然语言处理** - 支持自动摘要生成和关键词提取
4. **多语言支持** - 支持包括中文在内的多种语言

### 使用方法

安装新增依赖：

```bash
pip install -r requirements.txt
```

系统会自动使用 Newspaper4k 进行内容抓取，无需额外配置。

## 安装方法

1. 克隆此仓库
2. 安装依赖: `pip install -r requirements.txt`
3. 创建.env文件并配置必要参数
4. 初始化数据库: `python app/db/init_db.py`
5. 启动应用: `uvicorn app.main:app --reload`

## 使用方法

1. 访问 http://localhost:18899/admin 进入管理界面
2. 配置新闻源
3. 访问 http://localhost:18899 使用前台界面
4. 查看新闻、生成快报、导出PDF